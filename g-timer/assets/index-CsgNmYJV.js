import{c as v,o as g,a as o,w as I,v as C,b as N,t as d,F as x,r as A,d as b,e as E,f as V,g as H,h as P,i as B}from"./js/node-modules-Bh6QyScc.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&e(s)}).observe(document,{childList:!0,subtree:!0});function m(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function e(n){if(n.ep)return;n.ep=!0;const l=m(n);fetch(n.href,l)}})();const q="1.1.1",J=(r,t)=>{const m=r.__vccOpts||r;for(const[e,n]of t)m[e]=n;return m},U={setup(){const r=b([]),t=b(3),m=b(0);let e=null;E(()=>{const i=localStorage.getItem("shotTrackerShots"),c=localStorage.getItem("shotTrackerVolume");i&&(r.value=JSON.parse(i).sort((a,u)=>u.timestamp-a.timestamp),n()),c&&(t.value=parseFloat(c))}),V(r,()=>{r.value.length>0?n():(l(),m.value=0)},{deep:!0}),H(()=>{l()});const n=()=>{l(),s(),e=setInterval(s,1e3)},l=()=>{e&&(clearInterval(e),e=null)},s=()=>{if(r.value.length>0){const i=r.value[0].timestamp;m.value=Date.now()-i}},f=(i,c)=>{const a=Math.floor(i/1e3),u=Math.floor(a/60),h=Math.floor(u/60),p=String(a%60).padStart(2,"0"),S=String(u%60),O=String(h%24);let y=[];return h>0&&y.push(`${O}ч`),(u>0||h>0)&&y.push(`${S}м`),y.push(`${p}с`),y.join(" ")};V([r,t],()=>{localStorage.setItem("shotTrackerShots",JSON.stringify(r.value)),localStorage.setItem("shotTrackerVolume",t.value.toString())},{deep:!0});const T=P(()=>{const c=Date.now()-24*60*60*1e3,a=r.value.filter(p=>p.timestamp>=c),u=a.reduce((p,S)=>p+S.volume,0),h=a.length>0?(u/a.length).toFixed(1):0;return{shots:a.length,totalVolume:u.toFixed(1),avgVolume:h}}),_=(i,c)=>{if(c===0)return"—";const u=r.value[c-1].timestamp-i;return f(u)},w=()=>{r.value.unshift({timestamp:Date.now(),volume:t.value})},D=()=>{r.value=[]},F=()=>{confirm("Are you sure you want to clear all shot history? This cannot be undone.")&&D()},L=()=>{t.value=parseFloat((t.value+.5).toFixed(1))},k=()=>{t.value>.5&&(t.value=parseFloat((t.value-.5).toFixed(1)))};function M(i){const c=new Date(i),a=c.toLocaleDateString([],{month:"short",day:"numeric"});return`${c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})} (${a})`}return{version:q,shots:r,currentVolume:t,timeSinceLastShot:m,last24Hours:T,addShot:w,incrementVolume:L,decrementVolume:k,confirmClear:F,formatTimeDifference:_,formatDatetime:M,formatElapsedTime:f}}},j={class:"container"},K={class:"equal-columns mb"},z={class:"column column-auto"},G={class:"column"},Q=["disabled"],R={class:"shot-history mb"},W={key:0,class:"time-since"},X={key:1},Y={class:"version-number"};function Z(r,t,m,e,n,l){return g(),v("div",j,[o("section",K,[o("article",z,[o("button",{onClick:t[0]||(t[0]=(...s)=>e.decrementVolume&&e.decrementVolume(...s)),class:"btn-small"},"-"),I(o("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>e.currentVolume=s),min:"0.5",step:"0.5",class:"volume-input"},null,512),[[C,e.currentVolume]]),o("button",{onClick:t[2]||(t[2]=(...s)=>e.incrementVolume&&e.incrementVolume(...s)),class:"btn-small"},"+")]),o("article",G,[o("button",{onClick:t[3]||(t[3]=(...s)=>e.addShot&&e.addShot(...s)),class:"btn-primary"},"Налево!")])]),o("p",null,[t[5]||(t[5]=o("strong",null,"Сутки: ",-1)),N(" "+d(e.last24Hours.totalVolume)+" мл. ",1),o("button",{onClick:t[4]||(t[4]=(...s)=>e.confirmClear&&e.confirmClear(...s)),class:"btn-small",disabled:e.shots.length===0},"Очистить",8,Q)]),o("div",R,[o("table",null,[t[6]||(t[6]=o("thead",null,[o("tr",null,[o("th",null,"#"),o("th",null,"diff"),o("th",null,"time"),o("th",null,"ml")])],-1)),o("tbody",null,[(g(!0),v(x,null,A(e.shots,(s,f)=>(g(),v("tr",{key:s.timestamp},[o("td",null,d(e.shots.length-f),1),o("td",null,[f===0?(g(),v("div",W,d(e.formatElapsedTime(e.timeSinceLastShot)),1)):(g(),v("div",X,d(e.formatTimeDifference(s.timestamp,f)),1))]),o("td",null,d(e.formatDatetime(s.timestamp)),1),o("td",null,d(s.volume),1)]))),128))])])]),o("div",Y,"g-timer v"+d(e.version),1)])}const $=J(U,[["render",Z]]);B($).mount("#app");
