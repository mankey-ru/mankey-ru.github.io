import{c as v,o as g,a as o,b,n as N,t as f,F as x,r as E,w as H,v as B,d as _,e as P,f as T,g as j,h as J,i as U}from"./js/node-modules-DfgYBJNy.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&e(s)}).observe(document,{childList:!0,subtree:!0});function m(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function e(r){if(r.ep)return;r.ep=!0;const a=m(r);fetch(r.href,a)}})();const q="1.3.0",z=(l,t)=>{const m=l.__vccOpts||l;for(const[e,r]of t)m[e]=r;return m},K={setup(){const l=_([]),t=_(3),m=_(0);let e=null;P(()=>{const i=localStorage.getItem("shotTrackerShots"),u=localStorage.getItem("shotTrackerVolume");if(i){const c=JSON.parse(i);l.value=(Array.isArray(c)?c:[]).filter(n=>n.timestamp).sort((n,d)=>d.timestamp-n.timestamp),r()}u&&(t.value=parseFloat(u))}),T(l,()=>{l.value.length>0?r():(a(),m.value=0)},{deep:!0}),j(()=>{a()});const r=()=>{a(),s(),e=setInterval(s,1e3)},a=()=>{e&&(clearInterval(e),e=null)},s=()=>{if(l.value.length>0){const i=l.value[0].timestamp;m.value=Date.now()-i}},h=(i,u)=>{const c=Math.floor(i/1e3),n=Math.floor(c/60),d=Math.floor(n/60),p=String(c%60).padStart(2,"0"),S=String(n%60),A=String(d%24);let y=[];return d>0&&y.push(`${A}ч`),(n>0||d>0)&&y.push(`${S}м`),y.push(`${p}с`),y.join(" ")};T([l,t],()=>{localStorage.setItem("shotTrackerShots",JSON.stringify(l.value)),localStorage.setItem("shotTrackerVolume",t.value.toString())},{deep:!0});const V=J(()=>{const u=Date.now()-24*60*60*1e3,c=l.value.filter(p=>p.timestamp>=u),n=c.reduce((p,S)=>p+S.volume,0),d=c.length>0?(n/c.length).toFixed(1):0;return{shots:c.length,totalVolume:n.toFixed(1),avgVolume:d,color:w(n)}});function w(i,u={30:"green",40:"orange",50:"darkred",default:"red"}){const c=Object.keys(u).filter(n=>n!=="default").map(Number).sort((n,d)=>n-d);for(const n of c)if(i<n)return u[n];return u.default||"gray"}const D=(i,u)=>{if(u===0)return"—";const n=l.value[u-1].timestamp-i;return h(n)},k=()=>{l.value.unshift({timestamp:Date.now(),volume:t.value})},F=()=>{l.value=[]},L=()=>{confirm("Are you sure you want to clear all shot history? This cannot be undone.")&&F()},M=()=>{t.value=parseFloat((t.value+.5).toFixed(1))},O=()=>{t.value>.5&&(t.value=parseFloat((t.value-.5).toFixed(1)))};function C(i){return new Date(i).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})}function I(i){return new Date(i).toLocaleDateString([],{month:"short",day:"numeric"}).toLowerCase()}return{version:q,shots:l,currentVolume:t,timeSinceLastShot:m,last24Hours:V,addShot:k,incrementVolume:M,decrementVolume:O,confirmClear:L,formatTimeDifference:D,formatTimeShort:C,formatDateShort:I,formatElapsedTime:h}}},G={class:"container"},Q={class:"area-top row"},R={class:"col"},W={class:"col-auto version-number"},X={class:"col-auto"},Y=["disabled"],Z={class:"area-content history-wrap"},$={class:"history-table"},tt={key:0,class:"time-since"},et={key:1},ot={class:"color-grey"},st={class:"area-bottom row"},rt={class:"col col-auto"},nt={class:"col"};function lt(l,t,m,e,r,a){return g(),v("div",G,[o("div",Q,[o("div",R,[t[5]||(t[5]=b(" За сутки: ")),o("strong",{style:N({color:e.last24Hours.color})},f(e.last24Hours.totalVolume)+" ♡",5)]),o("div",W,"g-timer v"+f(e.version),1),o("div",X,[o("button",{onClick:t[0]||(t[0]=(...s)=>e.confirmClear&&e.confirmClear(...s)),class:"btn-small",disabled:e.shots.length===0},"Очистить",8,Y)])]),o("div",Z,[o("table",$,[t[6]||(t[6]=o("thead",null,[o("tr",null,[o("th",null,"#"),o("th",null,"diff"),o("th",null,"time"),o("th",null,"♡")])],-1)),o("tbody",null,[(g(!0),v(x,null,E(e.shots,(s,h)=>(g(),v("tr",{key:s.timestamp},[o("td",null,f(e.shots.length-h),1),o("td",null,[h===0?(g(),v("div",tt,f(e.formatElapsedTime(e.timeSinceLastShot)),1)):(g(),v("div",et,f(e.formatTimeDifference(s.timestamp,h)),1))]),o("td",null,[b(f(e.formatTimeShort(s.timestamp))+" ",1),o("span",ot,f(e.formatDateShort(s.timestamp)),1)]),o("td",null,f(s.volume),1)]))),128))])])]),o("section",st,[o("article",rt,[o("button",{onClick:t[1]||(t[1]=(...s)=>e.decrementVolume&&e.decrementVolume(...s)),class:"btn-small"},"-"),H(o("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=s=>e.currentVolume=s),min:"0.5",step:"0.5",class:"volume-input"},null,512),[[B,e.currentVolume]]),o("button",{onClick:t[3]||(t[3]=(...s)=>e.incrementVolume&&e.incrementVolume(...s)),class:"btn-small"},"+")]),o("article",nt,[o("button",{onClick:t[4]||(t[4]=(...s)=>e.addShot&&e.addShot(...s)),class:"btn-primary"},"ТЫК ПЫК")])])])}const at=z(K,[["render",lt]]);U(at).mount("#app");
