import{c as h,o as v,a as n,w as O,v as C,b as I,t as g,F as L,r as M,d as V,e as D,f as b,g as N,h as x,i as A}from"./js/node-modules-Bh6QyScc.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&e(s)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function e(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();const E=(l,t)=>{const a=l.__vccOpts||l;for(const[e,o]of t)a[e]=o;return a},H={setup(){const l=V([]),t=V(3),a=V(0);let e=null;D(()=>{const i=localStorage.getItem("shotTrackerShots"),c=localStorage.getItem("shotTrackerVolume");i&&(l.value=JSON.parse(i),o()),c&&(t.value=parseFloat(c))}),b(l,()=>{l.value.length>0?o():(r(),a.value=0)},{deep:!0}),N(()=>{r()});const o=()=>{r(),s(),e=setInterval(s,1e3)},r=()=>{e&&(clearInterval(e),e=null)},s=()=>{if(l.value.length>0){const i=l.value[0].timestamp;a.value=Date.now()-i}},d=(i,c)=>{const u=Math.floor(i/1e3),m=Math.floor(u/60),f=Math.floor(m/60),p=String(u%60).padStart(2,"0"),S=String(m%60),k=String(f%24);let y=[];return f>0&&y.push(`${k}ч.`),(m>0||f>0)&&y.push(`${S}м.`),y.push(`${p}с.`),y.join(" ")};b([l,t],()=>{localStorage.setItem("shotTrackerShots",JSON.stringify(l.value)),localStorage.setItem("shotTrackerVolume",t.value.toString())},{deep:!0});const T=x(()=>{const c=Date.now()-24*60*60*1e3,u=l.value.filter(p=>p.timestamp>=c),m=u.reduce((p,S)=>p+S.volume,0),f=u.length>0?(m/u.length).toFixed(1):0;return{shots:u.length,totalVolume:m.toFixed(1),avgVolume:f}}),_=(i,c)=>{if(c===0)return"—";const m=l.value[c-1].timestamp-i;return d(m)},w=()=>{l.value.unshift({timestamp:Date.now(),volume:t.value})},F=()=>{l.value=[]};return{shots:l,currentVolume:t,timeSinceLastShot:a,last24Hours:T,addShot:w,incrementVolume:()=>{t.value=parseFloat((t.value+.5).toFixed(1))},decrementVolume:()=>{t.value>.5&&(t.value=parseFloat((t.value-.5).toFixed(1)))},confirmClear:()=>{confirm("Are you sure you want to clear all shot history? This cannot be undone.")&&F()},formatTimeDifference:_,formatElapsedTime:d}}},P={class:"container"},B={class:"equal-columns mb"},q={class:"column column-auto"},J={class:"column"},U=["disabled"],j={class:"shot-history"},K={key:0,class:"time-since"},z={key:1};function G(l,t,a,e,o,r){return v(),h("div",P,[n("section",B,[n("article",q,[n("button",{onClick:t[0]||(t[0]=(...s)=>e.decrementVolume&&e.decrementVolume(...s)),class:"btn-small"},"-"),O(n("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>e.currentVolume=s),min:"0.5",step:"0.5",class:"volume-input"},null,512),[[C,e.currentVolume]]),n("button",{onClick:t[2]||(t[2]=(...s)=>e.incrementVolume&&e.incrementVolume(...s)),class:"btn-small"},"+")]),n("article",J,[n("button",{onClick:t[3]||(t[3]=(...s)=>e.addShot&&e.addShot(...s)),class:"btn-primary"},"Налево!")])]),n("p",null,[t[5]||(t[5]=n("strong",null,"Сутки: ",-1)),I(" "+g(e.last24Hours.totalVolume)+" мл. ",1),n("button",{onClick:t[4]||(t[4]=(...s)=>e.confirmClear&&e.confirmClear(...s)),class:"btn-small",disabled:e.shots.length===0},"Очистить",8,U)]),n("div",j,[n("table",null,[t[6]||(t[6]=n("thead",null,[n("tr",null,[n("th",null,"#"),n("th",null,"time"),n("th",null,"ml")])],-1)),n("tbody",null,[(v(!0),h(L,null,M(e.shots,(s,d)=>(v(),h("tr",{key:s.timestamp},[n("td",null,g(e.shots.length-d),1),n("td",null,[d===0?(v(),h("div",K,g(e.formatElapsedTime(e.timeSinceLastShot)),1)):(v(),h("div",z,g(e.formatTimeDifference(s.timestamp,d)),1))]),n("td",null,g(s.volume),1)]))),128))])])])])}const Q=E(H,[["render",G]]);A(Q).mount("#app");
