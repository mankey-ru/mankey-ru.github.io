<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Inex Stuff</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
			crossorigin="anonymous"
		/>
	</head>
	<body>
		<div class="container mt-5">
			<h2>Букмарклеты</h2>
			<p>
				Букмарклет (англ. bookmarklet; bookmark — «закладка» и applet — «апплет») — небольшая
				JavaScript-программа, оформленная как javascript: URL и сохраняемая как браузерная закладка.
			</p>
			<p>
				Для того, чтобы сохранить её у себя, нужно просто
				<b>перетащить ссылку на панель закладок своего браузера</b>.
			</p>
			<p>
				Для того, чтобы использовать - находясь на целевом сайте,
				<b>кликнуть по этой "закладке"</b> на панели закладок.
			</p>
			<hr />

			<div class="card mb-3">
				<div class="card-body">
					<h5 class="card-title">Открыть XML страницы</h5>
					<a
						class="btn btn-primary"
						href="javascript:(function(){  const myUrl = new URL(window.location); myUrl.searchParams.set('mode', 'xml'); window.location = myUrl.href;  })()"
					>
						mode=XML
					</a>
				</div>
			</div>
			<div class="card mb-3">
				<div class="card-body">
					<h5 class="card-title">Открыть JSON страницы</h5>
					<a
						class="btn btn-primary"
						href="javascript:(function(){  const myUrl = new URL(window.location); myUrl.searchParams.set('mode', 'json'); window.location = myUrl.href;  })()"
					>
						mode=JSON
					</a>
				</div>
			</div>
			<div class="card mb-3">
				<div class="card-body">
					<h5 class="card-title">Отобразить текст рассылки из JSON в HTML</h5>
					<p>Применять на странице письма рассылки (в JSON)</p>
					<a
						class="btn btn-primary"
						href="javascript:javascript:(function(){document.write(JSON.parse(document.body.innerText).message)})();"
					>
						MailView
					</a>
				</div>
			</div>
			<div class="card mb-3">
				<div class="card-body">
					<h5 class="card-title">Cкопировать в буфер обмена текст логов Kibana</h5>
					<p>
						Только то, что выведено на страницу и только то, что есть в основной таблице.
						Автоматическое копирование в буфер обмена работает только с HTTPS, то есть для того
						чтобы скопировать логи с kibana.web.rzd, надо открыть консоль браузера и скопировать
						оттуда руками (кнопка Copy)
					</p>
					<a
						class="btn btn-primary"
						href="javascript:(function () {try {const $ = window.jQuery;const trs = $('.kbn-table tbody tr.discover-table-row');if (!trs.length) console.error(`Результатов нет`);let RES = ``;trs.each((trIndex, el) => {const shortSpans = $(el).find('td[data-test-subj=docTableField] span[ng-non-bindable]');RES += Array.from(shortSpans).map((shortSpan) => shortSpan?.innerText?.trim?.()).join(' | ');if (trIndex !== trs.length - 1) {RES += `\n-------------------------------------------------------------------------------------------\n`;}});console.log(RES);navigator.clipboard.writeText(RES);} catch (err) {/*иначе кибана перехватит и переключит страницу*/ console.error(err);}})();"
					>
						KibCopy
					</a>
				</div>
			</div>
		</div>
	</body>
</html>
